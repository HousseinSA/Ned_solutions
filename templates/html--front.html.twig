<!DOCTYPE html>
<html{{ html_attributes }}>

    <head>
        <head-placeholder token="{{ placeholder_token }}">
            <title>{{ head_title|safe_join(' | ') }}</title>
            <css-placeholder token="{{ placeholder_token }}">
                <js-placeholder token="{{ placeholder_token }}">
    </head>

    <body{{ attributes }} id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">
        <!-- top section -->
        {#
      Keyboard navigation/accessibility link to main content section in
      page.html.twig.
    #}
        <a href="#main-content" class="visually-hidden focusable">
            {{ 'Skip to main content'|t }}
        </a>
        {{ page_top }}
        {{ page }}
        {{ page_bottom }}
        <js-bottom-placeholder token="{{ placeholder_token }}">
            <!-- js files -->
            <!-- External JS -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" type="text/javascript"></script>

            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.2/jquery.easing.min.js" type="text/javascript"></script>

            <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" type="text/javascript"></script> -->

            <!-- <link
                href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
                rel="stylesheet" /> -->

            <!-- Local JS -->
            <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>  -->

            <!-- <script src="{{ base_path ~ directory }}/js/jquery.easing.min.js" type="text/javascript"></script>   -->

            <script src="{{ base_path ~ directory }}/js/bgfader.js" type="text/javascript"></script>


            <!-- js for dropdown on top-bar -->
            <script>
                $(document).ready(function() {
                    $(".dropdown").on("hide.bs.dropdown", function() {
                        $(".dropdown-toggle").html(
                            'English <span class="glyphicon glyphicon-menu-down"></span>'
                        )
                    })
                    $(".dropdown").on("show.bs.dropdown", function() {
                        $(".dropdown-toggle").html(
                            'English <span class="glyphicon glyphicon-menu-up"></span>'
                        )
                    })
                })
            </script>

            <script>
                $(window).load(function() {
                    $("#visual").pignoseLayerSlider({
                        play: ".btn-play",
                        pause: ".btn-pause",
                        next: ".btn-next",
                        prev: ".btn-prev",
                    })
                })
            </script>
            <script>
                $(document).ready(function() {
                    // add Smooth scrolling to all links  in navbar + footer link
                    $(".navbar a,.header a,.our-updates a, footer a[href='#myPage']").on(
                        "click",
                        function(event) {
                            var hash = this.hash
                            $("html, body").animate({
                                    scrollTop: $(hash).offset().top,
                                },
                                900,
                                function() {
                                    window.location.hash = hash
                                }
                            )
                        },
                    )
                })
            </script>
            <script>
                $(window).scroll(function() {
                    $(".slideanim").each(function() {
                        var pos = $(this).offset().top
                        var winTop = $(window).scrollTop()
                        if (pos < winTop + 600) {
                            $(this).addClass("slide")
                        }
                    })
                })
            </script>

<script>
                document.addEventListener("DOMContentLoaded", function() {
                    const selectedLanguage = document.getElementById("selected-language");
                    const languageOptions = document.getElementById("language-options");

                    // Set saved language from localStorage
                    const savedLanguage = localStorage.getItem("selectedLanguage");
                    if (savedLanguage) {
                        const selectedOption = Array.from(languageOptions.children).find(
                            option => option.getAttribute("data-url") === savedLanguage
                        );
                        if (selectedOption) {
                            selectedLanguage.innerHTML = selectedOption.innerHTML;
                        }
                    } else {
                        // Default to French if no language is set
                        selectedLanguage.innerHTML = `
            <img src="${directory}/images/fr.svg" alt="FranÃ§ais" class="lang-img">
            <span>FR</span>
        `;
                    }

                    // Toggle dropdown visibility on click
                    selectedLanguage.addEventListener("click", function(event) {
                        event.stopPropagation();
                        languageOptions.style.display = languageOptions.style.display === "block" ? "none" : "block";
                    });

                    // Handle language selection
                    languageOptions.addEventListener("click", function(event) {
                        const option = event.target.closest(".language-option");
                        if (option) {
                            const selectedUrl = option.getAttribute("data-url");

                            // Update selected language display
                            selectedLanguage.innerHTML = option.innerHTML;

                            // Save selected language in localStorage
                            localStorage.setItem("selectedLanguage", selectedUrl);

                            // Redirect to the selected language URL
                            window.location.href = selectedUrl;
                        }
                    });

                    // Close dropdown when clicking outside
                    document.addEventListener("click", function(event) {
                        if (!selectedLanguage.contains(event.target) && !languageOptions.contains(event.target)) {
                            languageOptions.style.display = "none";
                        }
                    });
                });
            </script>

            </body>

            </html>